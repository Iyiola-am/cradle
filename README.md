# CRADLE V2

Cradle is a PHP MVC microframework built on top of [the Slim microframework](http://www.slimframework.com/).

Cradle features a well structured directory and uses composer for dependency management. It requires at least PHP 7.2 to work properly. It follows an MVC architecture.

You should get familiar with [the Slim microframework](http://www.slimframework.com/) first before trying out Cradle as most Cradle components are built around it's components.

This version comes bundled with a cron job scheduler, uses eloquent for database abstraction by default, features a database migration system, a session manager, and is overall more robust compared with the base micro framework. It leverages open source components. Although you may choose to remove these features for a more custom build.

If you appreciate the project, remember to leave a star! Thank you.

Developed and maintained by [Mohammed I. Adekunle](https://github.com/Iyiola-am).

## Requirements

- PHP 7.2+
- Apache's mod_rewrite module or similar.
- Composer.

## Installation

- Download and place the repository's files in your web server's root directory.
- Run `composer install`.
- Copy the `.env.example` and `.gitignore.example` files to `.env` and `.gitignore` respectively.
- Update your `.env` file according to your web server's environment.
- Build something awesome.

## Usage

### Directories

Cradle features a simple directory structure;

- **app:** This is where an app's controllers, models, middleware, crons, and helpers files are stored. You may also store custom app components here.
- **db:** This directory contains the app's database migrations and seeds.
- **framework:** This directory contains framework components that are specific to the app but aren't third-party dependencies, e.g. extensions of default cradle components.
- **public:** This is where all publicly available files are stored, the favicon.ico, robots.txt, javascript files and so on are located here.
- **resources:** This is where you app's resources (view files, app routes, cron tasks e.t.c) are stored. The files in this directory typical don't change throughout the lifetime of your app.
- **storage:** This directory contains all the files that are not meant to be accessible to the public by default e.g file uploads. For Twelve factor apps, you should consider using an external service for storing your files.
- **vendor:** This directory contains the project's third-party dependencies. It is generated by composer.chanllenge

### Configurations

Cradle uses environmental variables to store configuration files, by default a **.env.example** file is present in the root directory. These variables will be loaded into the app at bootstrap time and can be used any where in your code by calling the `getenv()` function or as a key in the global `$_ENV` variable.

### Routing

Cradle uses the default router provided by [the Slim microframework](http://www.slimframework.com/). The routes are defined in the **resources/routes** directory. You can use one or more route files to specify your routes but you must include the files in the [HTTPKernel](app/HTTPKernel.php) class for them to be acknowledged while routing. By default, the route rules can accept closures just like in [the Slim microframework](http://www.slimframework.com/) and can accept controller definitions that Cradle provides to make your app logic more organized.

### Middleware

Cradle being built on [the Slim microframework](http://www.slimframework.com/) also supports middlewares by default. Middlewares are located in **app/Middleware** directory. A sample before middleware has been provided in the code. A CORS middleware also comes with cradle by default.

### MVC

Cradle follows the MVC software architecture, it uses controllers for handling requests, models for interacting with the database and views for displaying the result of a controller operation to the client.

#### Controllers

Controllers are classes that respond to user requests i.e user requests a web page, submits a form e.t.c. Controllers extend the [Cradle\Controller](framework/Controller.php) class or one of it's subclasses.

Controllers are stored in the **app/Controllers** directory. You may use subdirectories to organize your controllers, but you will need to specify their namespace when routing.

Cradle controllers provide more features than using the traditional Slim controller definition.

#### Models

This version of cradle uses the eloquent database abstraction layer by default. Your model files are expected to reside in the **app\Models** directory or any of it's subdirectories. A sample model has already been predefined.

#### Views

Views are used to display information. The information is usually supplied by a controller after it has processed a request. Ideally, views should only render information and shouldn't do any interactions with the database. You return views to be rendered from a cradle controller. Twig is the default templating engine used by cradle.

Views files are stored in the **resources/views** directory. You may extend the default View Compiler instance in order to use a templating engine apart from twig, but you will also need to extend the default [View Compiler](framework/ViewCompiler.php) class to implemention this.

## License

Cradle is licensed under the [MIT license](http://opensource.org/licenses/MIT).
